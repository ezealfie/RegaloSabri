:root {
    --bg-void: #111;
    --wall-warm: #f4ebd9; /* Crema suave */
    --floor-wood: #4a3328; /* Madera oscura */
    --desk-wood: #38261d;
    --desk-edge: #261812; /* Borde oscuro para efecto 3D */
    --led-red: #ff2a2a;
    --lamp-light: rgba(255, 210, 160, 0.4);
}

body {
    background-color: var(--bg-void); margin: 0; height: 100vh;
    display: flex; justify-content: center; align-items: center;
    font-family: 'Poppins', sans-serif; overflow: hidden;
}

.scene {
    width: 100vw; height: 100vh; perspective: 2000px;
    display: flex; justify-content: center; align-items: center;
    background: radial-gradient(circle at center, #222, #000);
}

/* --- EL DIORAMA (La Caja Mágica) --- */
.room-diorama {
    position: relative; width: 500px; height: 500px;
    transform-style: preserve-3d;
    /* Ángulo Isométrico Perfecto - NO TOCAR */
    transform: rotateX(60deg) rotateZ(-45deg);
}

/* --- ESTRUCTURA --- */
.floor-wood {
    position: absolute; width: 500px; height: 500px;
    background: var(--floor-wood);
    /* Tablas de madera */
    background-image: repeating-linear-gradient(90deg, rgba(0,0,0,0.1) 0, rgba(0,0,0,0.1) 2px, transparent 2px, transparent 50px);
    box-shadow: inset 0 0 150px rgba(0,0,0,0.6);
    transform-style: preserve-3d;
}

.wall-back {
    position: absolute; width: 500px; height: 350px;
    background: var(--wall-warm);
    transform-origin: top; transform: rotateX(-90deg) translateZ(-350px);
    top: 0; display: flex; justify-content: center; align-items: center;
    box-shadow: inset 0 0 80px rgba(0,0,0,0.15);
}

.wall-left {
    position: absolute; width: 350px; height: 500px;
    background: var(--wall-warm);
    transform-origin: left; transform: rotateY(90deg);
    top: 0; left: 0;
    box-shadow: inset 0 0 80px rgba(0,0,0,0.15);
}

.skirting { /* Zócalo */
    position: absolute; bottom: 0; width: 100%; height: 15px;
    background: var(--desk-wood); border-top: 1px solid #261812;
}

.warm-light-reflection {
    position: absolute; top: 50px; right: 0; width: 200px; height: 300px;
    background: radial-gradient(ellipse at right, var(--lamp-light), transparent 70%);
}

/* --- RELOJ --- */
.clock-box {
    padding: 15px 35px; background: #0a0a0a; border-radius: 4px;
    box-shadow: 0 0 35px rgba(255, 42, 42, 0.5);
    transform: translateZ(15px); cursor: pointer; border: 2px solid #1a1a1a;
}
#time-display {
    font-family: 'Orbitron', monospace; color: var(--led-red);
    font-size: 28px; text-shadow: 0 0 15px var(--led-red);
}

/* --- MESA 3D SÓLIDA --- */
.desk-container {
    position: absolute; top: 100px; left: 100px; width: 250px; height: 120px;
    transform-style: preserve-3d;
    transform: translateZ(100px); /* Altura de la mesa desde el piso */
}

.desk-top {
    position: absolute; width: 100%; height: 100%;
    background: var(--desk-wood);
    box-shadow: inset 0 0 30px rgba(0,0,0,0.4);
    transform-style: preserve-3d;
}

/* Bordes 3D para que no parezca papel */
.desk-edge-front {
    position: absolute; bottom: 0; width: 100%; height: 12px;
    background: var(--desk-edge); transform-origin: bottom; transform: rotateX(-90deg);
}
.desk-edge-side {
    position: absolute; right: 0; width: 12px; height: 100%;
    background: var(--desk-edge); transform-origin: right; transform: rotateY(-90deg);
}

/* Patas */
.leg {
    position: absolute; width: 14px; height: 14px; background: var(--desk-edge);
}
.leg::after { /* El cuerpo de la pata bajando al piso */
    content: ''; position: absolute; width: 100%; height: 100px;
    background: var(--desk-edge); transform-origin: top; transform: rotateX(-90deg);
}
.fl { top: 5px; left: 5px; } .fr { top: 5px; right: 5px; }
.bl { bottom: 5px; left: 5px; } .br { bottom: 5px; right: 5px; }

/* Sombra en el piso (Ancla la mesa) */
.table-shadow-floor {
    position: absolute; top: 110px; left: 110px; width: 250px; height: 120px;
    background: rgba(0,0,0,0.5); filter: blur(20px); transform: translateZ(1px);
}

/* --- OBJETOS --- */
.wallet-item {
    position: absolute; top: 40px; left: 150px; width: 55px; height: 35px;
    background: #4b3621; border-radius: 3px; transform: rotateZ(10deg);
    cursor: pointer; box-shadow: 2px 3px 5px rgba(0,0,0,0.5); border: 1px solid #38261d;
}

.pot-clay {
    position: absolute; bottom: 50px; right: 60px; width: 50px; height: 50px;
    background: #d84315; border-radius: 5px; transform: translateZ(25px);
    box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
}
.leaf {
    position: absolute; background: #2e7d32; width: 25px; height: 45px;
    border-radius: 0 25px 0 25px; bottom: 45px; transform-origin: bottom;
}
.l1 { transform: rotateY(0deg) rotateX(-20deg); }
.l2 { transform: rotateY(120deg) rotateX(-20deg); }

/* --- MODALES --- */
.hidden { display: none !important; }
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85); z-index: 999;
    display: flex; justify-content: center; align-items: center;
    backdrop-filter: blur(5px);
}
.modal-box {
    background: #fff; padding: 30px; border-radius: 15px; width: 320px; text-align: center;
}
.dark-theme { background: #0a0a0a; color: var(--led-red); border: 2px solid #222; }
.cupon {
    background: #fff8e1; border: 1px solid #ffcc80; padding: 15px; margin: 10px 0;
    border-radius: 8px; cursor: pointer; text-align: left; font-weight: 600;
}
.cupon.usado { background: #eee; color: #aaa; text-decoration: line-through; }
.btn-cerrar {
    background: #ff2a2a; color: white; border: none; padding: 10px 20px; 
    border-radius: 5px; margin-top: 15px; cursor: pointer;
}
#qrcode { display: flex; justify-content: center; margin-top:15px; }